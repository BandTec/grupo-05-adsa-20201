<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUPERVISOR - DASHBOARD</title>
    <link rel="stylesheet" href="./style-pag-dashboard.css">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
</head>

<body onload="carregarDados()">




    <!-- Inicio nave da página -->

    <div class="divNav">
        <!-- Nave da página -->
        <div class="divImg"> </div>
        <!-- Logo Supervisor -->

        <button class="btnSair"> <!-- Botão Sair -->
           <p class="pSair">SAIR</p> <!-- Texto do botão sair -->
       </button>

    </div>

    <!-- Final nave da página -->



    <!-- Inicio corpo da página -->


    <!-- inicio visão geral -->
    <div class="divVisaoGeral">
        <p class="pVisaoGeral"> VISÃO GERAL </p>
    </div>



    <!-- menu lateral -->
    <div class="divMenuLateral">

        <!-- Nome e foto -->
        <div class="divPersona">

            <div class="divFoto"><img src="./Imagens/pessoa.png" alt="" width="30" height="30" class="imgFoto"></div>

            <p class="pNome">Karina Wakassuqui</p>
        </div>
        <!-- Final nome e foto -->

        <hr class="hrTopo">

        <!-- Começo informações de hardware -->
        <div class="divInformacoesHard" id="idInformacoesHard">

            <p class="pFiltrarComputadores"> Filtrar computadores </p>

            <p class="pStatusMaquina"> Status: <span id="idSpanStatus" class="spanStatus"> </span> </p>

            <div id="computadoresOk" style=" display: none; width: 100%; height: 90%;"> </div>

            <div id="computadoresAlerta" style=" display: none; width: 100%; height: 90%;"> </div>

            <div id="computadoresCrits" style=" display: none; width: 100%; height: 90%;"> </div>

        </div>
        <!-- Final informações de hardware -->

        <hr class="hrFinal">

        <button class="btnDiscord"><img src="./Imagens/discord (1).png" alt="" width="35" height="35" ></button>

    </div>
    <!-- final menu lateral -->




    <!-- Div Status Máquinas -->
    <div class="divFarois">
        <button class="divFarolCrit" onclick="exibirInfoCrit()" id="idQtdCrit"> - </button>

        <button class="divFarolAlerta" onclick="exibirInfoAlerta()" id="idQtdAlerta"> - </button>

        <button class="divFarolOk" onclick="exibirInfoOk()" id="idQtdOk"> - </button>
    </div>
    <!-- Fechamento Status Máquinas -->



    <!-- div Gráficos -->
    <div class="divGraficos">

        <canvas id="canvasGrafSemanal" height="90"></canvas>


        <!-- Funcões após clicar -->
        <div class="divStatusPC">

            <div class="divDiscoMemoria">

                <div class="divStatusDisco">
                                <p class="pDisco">Disco</p>

                    <canvas id="canvasStatusDisco" height="100" class="classStatusDisco"></canvas>

                </div>

                <div class="divStatusMemoria">
                                <p class="pMemoria">Memória</p>

                    <canvas id="canvasStatusMemoria" class="divStatusDisco" height="0.50"></canvas>

                </div>

            </div>
        
            <div class="divCPUGPU">

                <div class="divCPU">   
                                <p class="pCPU">CPU</p>
                    <canvas id="canvasStatusCPU" height="70"></canvas>

                </div>

                <div class="divGPU">
                                <p class="pGPU">GPU</p>
                    <canvas id="canvasStatusGPU" height="70"></canvas>
                </div>
            </div>
    

    </div>
        </div>
    </div>
    <!-- Final Gráficos -->




</body>

</html>
<script src="./dash.js"></script>
<script>
    let qtdComputador = parseInt(Math.random() * 30 + 1);

    let qtdComputadorOk = 0;
    let qtdComputadorAlerta = 0;
    let qtdComputadorCrit = 0;


    let idComputadorOk = [];
    let idComputadorAlerta = [];
    let idComputadorCrit = [];

    function carregarDados() {

        for (let i = 0; i < qtdComputador; i++) {
            let dadoCpu = parseInt(Math.random() * 100 + 1);
            let dadoMemoria = parseInt(Math.random() * 100 + 1);
            let dadoDisco = parseInt(Math.random() * 100 + 1);
            let dadoGpu = parseInt(Math.random() * 100 + 1);

            if ((dadoCpu < 60 && dadoMemoria < 60) || (dadoGpu < 60 && dadoDisco < 60)) {
                idComputadorOk.push("00" + (i + 1));
                qtdComputadorOk++;
            } else if ((dadoCpu <= 70 && dadoMemoria <= 70) || (dadoGpu <= 70 && dadoDisco <= 70)) {
                idComputadorAlerta.push("00" + (i + 1));
                qtdComputadorAlerta++;
            } else {
                idComputadorCrit.push("00" + (i + 1));
                qtdComputadorCrit++;
            }
        }

        idQtdOk.innerHTML = qtdComputadorOk;
        idQtdAlerta.innerHTML = qtdComputadorAlerta;
        idQtdCrit.innerHTML = qtdComputadorCrit;


    }

    function exibirInfoCrit() {

        document.getElementById('computadoresOk').style.display = "none";
        document.getElementById('computadoresAlerta').style.display = "none";
        document.getElementById('computadoresCrits').style.display = "block";

        computadoresCrits.innerHTML = '';

        document.getElementById('idSpanStatus').style.color = "#eb4d4b"
        document.getElementById('idSpanStatus').innerHTML = "Crítico"

        for (let i = 0; i < qtdComputadorCrit; i++) {

            computadoresCrits.innerHTML += `<button style = " margin-left: 15px;" class="idMaquina" id="idGraficos" onclick="exibirGraficos()">ID ${idComputadorCrit[i]}</button> <br>`;
        }

    }

    function exibirInfoAlerta() {

        document.getElementById('computadoresOk').style.display = "none";
        document.getElementById('computadoresCrits').style.display = "none";
        document.getElementById('computadoresAlerta').style.display = "block";

        computadoresAlerta.innerHTML = '';

        document.getElementById('idSpanStatus').style.color = "#f9ca24"
        document.getElementById('idSpanStatus').innerHTML = "Em Alerta"

        for (let i = 0; i < qtdComputadorAlerta; i++) {

            computadoresAlerta.innerHTML += `<button style = " margin-left: 15px;" class="idMaquina" id="idGraficos" onclick="exibirGraficos()">ID ${idComputadorAlerta[i]}</button> <br>`;
        }

    }

    function exibirInfoOk() {

        document.getElementById('computadoresOk').style.display = "block";
        document.getElementById('computadoresCrits').style.display = "none";
        document.getElementById('computadoresAlerta').style.display = "none";

        computadoresOk.innerHTML = '';

        document.getElementById('idSpanStatus').style.color = "#43B581"
        document.getElementById('idSpanStatus').innerHTML = "Estável"


        for (let i = 0; i < qtdComputadorOk; i++) {

            computadoresOk.innerHTML += `<button style = " margin-left: 15px;" class="idMaquina" id="idGraficos" onclick="exibirGraficos()">ID ${idComputadorOk[i]}</button> <br>`;
        }

    }
</script>